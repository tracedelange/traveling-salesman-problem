{"ast":null,"code":"import Konva from 'konva/lib/Core';\nimport { applyNodeProps, updatePicture, EVENTS_NAMESPACE } from './makeUpdates';\nexport { unstable_now as now, unstable_IdlePriority as idlePriority, unstable_runWithPriority as run } from 'scheduler';\nvar NO_CONTEXT = {};\nvar UPDATE_SIGNAL = {}; // for react-spring capability\n\nKonva.Node.prototype._applyProps = applyNodeProps;\nexport function appendInitialChild(parentInstance, child) {\n  if (typeof child === 'string') {\n    // Noop for string children of Text (eg <Text>foo</Text>)\n    console.error('Do not use plain text as child of Konva.Node. You are using text: ' + child);\n    return;\n  }\n\n  parentInstance.add(child);\n  updatePicture(parentInstance);\n}\nexport function createInstance(type, props, internalInstanceHandle) {\n  var NodeClass = Konva[type];\n\n  if (!NodeClass) {\n    console.error('Konva has no node with the type ' + type + '. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: \"import \"konva/lib/shapes/' + type + '\"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html');\n    NodeClass = Konva.Group;\n  } // we need to split props into events and non events\n  // we we can pass non events into constructor directly\n  // that way the performance should be better\n  // we we apply change \"applyNodeProps\"\n  // then it will trigger change events on first run\n  // but we don't need them!\n\n\n  var propsWithoutEvents = {};\n  var propsWithOnlyEvents = {};\n\n  for (var key in props) {\n    var isEvent = key.slice(0, 2) === 'on';\n\n    if (isEvent) {\n      propsWithOnlyEvents[key] = props[key];\n    } else {\n      propsWithoutEvents[key] = props[key];\n    }\n  }\n\n  var instance = new NodeClass(propsWithoutEvents);\n  applyNodeProps(instance, propsWithOnlyEvents);\n  return instance;\n}\nexport function createTextInstance(text, rootContainerInstance, internalInstanceHandle) {\n  console.error('Text components are not supported for now in ReactKonva. Your text is: \"' + text + '\"');\n}\nexport function finalizeInitialChildren(domElement, type, props) {\n  return false;\n}\nexport function getPublicInstance(instance) {\n  return instance;\n}\nexport function prepareForCommit() {\n  return null;\n}\nexport function preparePortalMount() {\n  return null;\n}\nexport function prepareUpdate(domElement, type, oldProps, newProps) {\n  return UPDATE_SIGNAL;\n}\nexport function resetAfterCommit() {// Noop\n}\nexport function resetTextContent(domElement) {// Noop\n}\nexport function shouldDeprioritizeSubtree(type, props) {\n  return false;\n}\nexport function getRootHostContext() {\n  return NO_CONTEXT;\n}\nexport function getChildHostContext() {\n  return NO_CONTEXT;\n}\nexport var scheduleTimeout = setTimeout;\nexport var cancelTimeout = clearTimeout;\nexport var noTimeout = -1; // export const schedulePassiveEffects = scheduleDeferredCallback;\n// export const cancelPassiveEffects = cancelDeferredCallback;\n\nexport function shouldSetTextContent(type, props) {\n  return false;\n} // The Konva renderer is secondary to the React DOM renderer.\n\nexport var isPrimaryRenderer = false;\nexport var warnsIfNotActing = true;\nexport var supportsMutation = true;\nexport function appendChild(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n\n  updatePicture(parentInstance);\n}\nexport function appendChildToContainer(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n\n  updatePicture(parentInstance);\n}\nexport function insertBefore(parentInstance, child, beforeChild) {\n  // child._remove() will not stop dragging\n  // but child.remove() will stop it, but we don't need it\n  // removing will reset zIndexes\n  child._remove();\n\n  parentInstance.add(child);\n  child.setZIndex(beforeChild.getZIndex());\n  updatePicture(parentInstance);\n}\nexport function insertInContainerBefore(parentInstance, child, beforeChild) {\n  insertBefore(parentInstance, child, beforeChild);\n}\nexport function removeChild(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\nexport function removeChildFromContainer(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\nexport function commitTextUpdate(textInstance, oldText, newText) {\n  console.error('Text components are not yet supported in ReactKonva. You text is: \"' + newText + '\"');\n}\nexport function commitMount(instance, type, newProps) {// Noop\n}\nexport function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n  applyNodeProps(instance, newProps, oldProps);\n}\nexport function hideInstance(instance) {\n  instance.hide();\n  updatePicture(instance);\n}\nexport function hideTextInstance(textInstance) {// Noop\n}\nexport function unhideInstance(instance, props) {\n  if (props.visible == null || props.visible) {\n    instance.show();\n  }\n}\nexport function unhideTextInstance(textInstance, text) {// Noop\n}\nexport function clearContainer(container) {// Noop\n}","map":{"version":3,"sources":["/Users/tracedelange/dev/code/project-mode/tsp-interactive/node_modules/react-konva/es/ReactKonvaHostConfig.js"],"names":["Konva","applyNodeProps","updatePicture","EVENTS_NAMESPACE","unstable_now","now","unstable_IdlePriority","idlePriority","unstable_runWithPriority","run","NO_CONTEXT","UPDATE_SIGNAL","Node","prototype","_applyProps","appendInitialChild","parentInstance","child","console","error","add","createInstance","type","props","internalInstanceHandle","NodeClass","Group","propsWithoutEvents","propsWithOnlyEvents","key","isEvent","slice","instance","createTextInstance","text","rootContainerInstance","finalizeInitialChildren","domElement","getPublicInstance","prepareForCommit","preparePortalMount","prepareUpdate","oldProps","newProps","resetAfterCommit","resetTextContent","shouldDeprioritizeSubtree","getRootHostContext","getChildHostContext","scheduleTimeout","setTimeout","cancelTimeout","clearTimeout","noTimeout","shouldSetTextContent","isPrimaryRenderer","warnsIfNotActing","supportsMutation","appendChild","parent","moveToTop","appendChildToContainer","insertBefore","beforeChild","_remove","setZIndex","getZIndex","insertInContainerBefore","removeChild","destroy","off","removeChildFromContainer","commitTextUpdate","textInstance","oldText","newText","commitMount","commitUpdate","updatePayload","hideInstance","hide","hideTextInstance","unhideInstance","visible","show","unhideTextInstance","clearContainer","container"],"mappings":"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","sourcesContent":["import Konva from 'konva/lib/Core';\nimport { applyNodeProps, updatePicture, EVENTS_NAMESPACE } from './makeUpdates';\n\nexport { unstable_now as now, unstable_IdlePriority as idlePriority, unstable_runWithPriority as run } from 'scheduler';\n\nvar NO_CONTEXT = {};\nvar UPDATE_SIGNAL = {};\n\n// for react-spring capability\nKonva.Node.prototype._applyProps = applyNodeProps;\n\nexport function appendInitialChild(parentInstance, child) {\n  if (typeof child === 'string') {\n    // Noop for string children of Text (eg <Text>foo</Text>)\n    console.error('Do not use plain text as child of Konva.Node. You are using text: ' + child);\n    return;\n  }\n\n  parentInstance.add(child);\n\n  updatePicture(parentInstance);\n}\n\nexport function createInstance(type, props, internalInstanceHandle) {\n  var NodeClass = Konva[type];\n  if (!NodeClass) {\n    console.error('Konva has no node with the type ' + type + '. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: \"import \"konva/lib/shapes/' + type + '\"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html');\n    NodeClass = Konva.Group;\n  }\n\n  // we need to split props into events and non events\n  // we we can pass non events into constructor directly\n  // that way the performance should be better\n  // we we apply change \"applyNodeProps\"\n  // then it will trigger change events on first run\n  // but we don't need them!\n  var propsWithoutEvents = {};\n  var propsWithOnlyEvents = {};\n\n  for (var key in props) {\n    var isEvent = key.slice(0, 2) === 'on';\n    if (isEvent) {\n      propsWithOnlyEvents[key] = props[key];\n    } else {\n      propsWithoutEvents[key] = props[key];\n    }\n  }\n\n  var instance = new NodeClass(propsWithoutEvents);\n\n  applyNodeProps(instance, propsWithOnlyEvents);\n\n  return instance;\n}\n\nexport function createTextInstance(text, rootContainerInstance, internalInstanceHandle) {\n  console.error('Text components are not supported for now in ReactKonva. Your text is: \"' + text + '\"');\n}\n\nexport function finalizeInitialChildren(domElement, type, props) {\n  return false;\n}\n\nexport function getPublicInstance(instance) {\n  return instance;\n}\n\nexport function prepareForCommit() {\n  return null;\n}\n\nexport function preparePortalMount() {\n  return null;\n}\n\nexport function prepareUpdate(domElement, type, oldProps, newProps) {\n  return UPDATE_SIGNAL;\n}\n\nexport function resetAfterCommit() {\n  // Noop\n}\n\nexport function resetTextContent(domElement) {\n  // Noop\n}\n\nexport function shouldDeprioritizeSubtree(type, props) {\n  return false;\n}\n\nexport function getRootHostContext() {\n  return NO_CONTEXT;\n}\n\nexport function getChildHostContext() {\n  return NO_CONTEXT;\n}\n\nexport var scheduleTimeout = setTimeout;\nexport var cancelTimeout = clearTimeout;\nexport var noTimeout = -1;\n// export const schedulePassiveEffects = scheduleDeferredCallback;\n// export const cancelPassiveEffects = cancelDeferredCallback;\n\nexport function shouldSetTextContent(type, props) {\n  return false;\n}\n\n// The Konva renderer is secondary to the React DOM renderer.\nexport var isPrimaryRenderer = false;\nexport var warnsIfNotActing = true;\nexport var supportsMutation = true;\n\nexport function appendChild(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n\n  updatePicture(parentInstance);\n}\n\nexport function appendChildToContainer(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n  updatePicture(parentInstance);\n}\n\nexport function insertBefore(parentInstance, child, beforeChild) {\n  // child._remove() will not stop dragging\n  // but child.remove() will stop it, but we don't need it\n  // removing will reset zIndexes\n  child._remove();\n  parentInstance.add(child);\n  child.setZIndex(beforeChild.getZIndex());\n  updatePicture(parentInstance);\n}\n\nexport function insertInContainerBefore(parentInstance, child, beforeChild) {\n  insertBefore(parentInstance, child, beforeChild);\n}\n\nexport function removeChild(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\n\nexport function removeChildFromContainer(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\n\nexport function commitTextUpdate(textInstance, oldText, newText) {\n  console.error('Text components are not yet supported in ReactKonva. You text is: \"' + newText + '\"');\n}\n\nexport function commitMount(instance, type, newProps) {\n  // Noop\n}\n\nexport function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n  applyNodeProps(instance, newProps, oldProps);\n}\n\nexport function hideInstance(instance) {\n  instance.hide();\n  updatePicture(instance);\n}\n\nexport function hideTextInstance(textInstance) {\n  // Noop\n}\n\nexport function unhideInstance(instance, props) {\n  if (props.visible == null || props.visible) {\n    instance.show();\n  }\n}\n\nexport function unhideTextInstance(textInstance, text) {\n  // Noop\n}\n\nexport function clearContainer(container) {\n  // Noop\n}"]},"metadata":{},"sourceType":"module"}